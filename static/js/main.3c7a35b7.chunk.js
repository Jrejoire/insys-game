(this["webpackJsonpinsys-game"]=this["webpackJsonpinsys-game"]||[]).push([[0],{169:function(e,t,n){},177:function(e,t,n){e.exports=n(186)},182:function(e,t,n){},183:function(e,t,n){},186:function(e,t,n){"use strict";n.r(t);var i=n(80),o=n.n(i),a=n(175),s=n.n(a),r=(n(182),n(183),n(169),n(115)),c=n.n(r),l=n(107),u=n(136),d=n(12),m=n(166),h=n(157),f=n(96),g=n(167),p=n(176),v=function(e){var t=Object(i.useRef)(null),n=(e.antialias,e.engineOptions,e.adaptToDeviceRatio,e.sceneOptions),a=e.onRender,s=(e.onSceneReady,Object(p.a)(e,["antialias","engineOptions","adaptToDeviceRatio","sceneOptions","onRender","onSceneReady"])),r=Object(i.useState)(!1),c=Object(g.a)(r,2),l=c[0],u=c[1],m=Object(i.useState)(null),h=Object(g.a)(m,2),f=h[0],v=h[1];return Object(i.useEffect)((function(){if(window){var e=function(){f&&f.getEngine().resize()};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}}),[f]),Object(i.useEffect)((function(){if(!l){u(!0);var i=new d.h(t.current,!0,{stencil:!0}),o=new d.p(i,n);v(o),o.isReady()?e.onSceneReady(o):o.onReadyObservable.addOnce((function(t){return e.onSceneReady(t)})),i.runRenderLoop((function(){"function"===typeof a&&a(o),o.render()}))}return function(){null!==f&&f.dispose()}}),[l,n,e,a,f]),o.a.createElement("canvas",Object.assign({ref:t},s))},M={tabForces:{units:{soldier:{class:"FS",move:4,defense:{roll:1,success:4},melee:{roll:1,success:3},range:{roll:1,success:3,mods:{s:-1,m:1,l:0,xl:-1}},maxRange:1212,maxInGame:void 0,cost:10}}},sysTroops:{units:{soldier:{class:"FS",move:4,defense:{roll:1,success:4},melee:{roll:1,success:3},range:{roll:2,success:4,mods:{s:0,m:1,l:-1,xl:-1}},maxRange:1212,maxInGame:void 0,cost:10}}},rebels:{units:{soldier:{class:"FS",move:4,defense:{roll:1,success:4},melee:{roll:2,success:4},range:{roll:3,success:5,mods:{s:1,m:0,l:-1,xl:-2}},maxRange:1212,maxInGame:void 0,cost:10}}},outerRing:{units:{soldier:{class:"FS",move:4,defense:{roll:1,success:4},melee:{roll:2,success:3},range:{roll:1,success:3,mods:{s:1,m:0,l:-2,xl:-2}},maxRange:1212,maxInGame:void 0,cost:10}}},voidWarriors:{units:{soldier:{class:"FS",move:4,defense:{roll:1,success:4},melee:{roll:4,success:5},range:{roll:3,success:5,mods:{s:0,m:0,l:-1,xl:-2}},maxRange:1212,maxInGame:void 0,cost:10}}}};d.b.AllowMatricesInterpolation=!0;var w=function(e){var t=e.getEngine().getRenderingCanvas(),n=h.a.CreateFullscreenUI("sceneUI");n.isForeground=!0;var i=new d.c("arcCamera",d.u.ToRadians(0),d.u.ToRadians(100),780,new d.v(-60,400,0),e);i.attachControl(t,!0),i.angularsensibility*=-1,i.checkCollisions=!0,i.ellipsoid=new d.v(1.5,1,1.5);var o=new d.n("pointLight",new d.v(75,400,150),e);o.intensity=1,o.range=5e3,new d.j("hemiLight",new d.v(0,-4900,0),e).intensity=.7;var a=new d.r(1024,o);a.usePoissonSampling=!0;var s=new d.k("hl1",e);s.innerGlow=!1;var r=new d.s("invisibleMaterial",e);r.alpha=0;var g=new d.s("transparentMaterial",e);g.alpha=.5;var p=d.m.CreateSphere("skyBox",{diameter:5500,diameterX:5500},e),v=new d.s("skyBox",e);v.backFaceCulling=!1,p.material=v,p.receiveShadows=!0;var w=d.m.CreateCylinder("background",{height:1,diameter:5e3,tessellation:5e3},e),y=new d.s("background",e);y.opacityTexture=new d.t(".".concat("","/Textures/OpacityTemplate.png"),e),y.backFaceCulling=!1,w.material=y,w.translate(d.d.Y,-1,e),w.visibility=.4,w.receiveShadows=!0;var b=new d.s("boardMaterial",e);b.diffuseTexture=new d.t(".".concat("","/Textures/Wood/Wood_021_basecolor.jpg"),e),b.bumpTexture=new d.t(".".concat("","/Textures/Wood/Wood_021_normal.jpg"),e),b.ambientTexture=new d.t(".".concat("","/Textures/Wood/Wood_021_ambientOcclusion.jpg"),e);var x=new d.s("asphaltMaterial",e);x.diffuseTexture=new d.t(".".concat("","/Textures/Asphalt/Asphalt_001_COLOR.jpg"),e),x.bumpTexture=new d.t(".".concat("","/Textures/Asphalt/Asphalt_001_NRM.jpg"),e),x.specularTexture=new d.t(".".concat("","/Textures/Asphalt/Asphalt_001_SPEC.jpg"),e),x.ambientTexture=new d.t(".".concat("","/Textures/Asphalt/Asphalt_001_OCC.jpg"),e);var k=new d.s("plasticMaterial",e);k.diffuseColor=new d.f(220/255,220/255,220/255);var B=new d.s("tokenMaterial",e);B.diffuseTexture=new d.t(".".concat("","/Textures/Token/Coin_low_Coin_material_BaseColor2.png"),e),B.bumpTexture=new d.t(".".concat("","/Textures/Token/Coin_low_Coin_material_Normal.png"),e);var S=new d.s("tokenMaterial",e);S.diffuseTexture=new d.t(".".concat("","/Textures/Token/Coin_low_Coin_material_BaseColor.png"),e),S.bumpTexture=new d.t(".".concat("","/Textures/Token/Coin_low_Coin_material_Normal.png"),e),new d.s("baseMaterial",e).diffuseColor=new d.f.Black,new d.s("baseMaterial",e).diffuseColor=new d.f.White;var O=new d.s("diceMatWhite",e);O.diffuseColor=new d.f.White;var C=new d.s("diceMatBlack",e);C.diffuseColor=new d.f.Black;var E=new d.s("diceMatRed",e);E.diffuseColor=new d.f(164/255,27/255,7/255);var T="if( vPositionW.z  < -340.){ discard; } if( vPositionW.z  > 340.){ discard; } if( vPositionW.x  > 450.){ discard; } if( vPositionW.x  < -450.){ discard; }",N=new f.a("moveAreaMat",e);N.alpha=.25,N.Fragment_Custom_Diffuse(T);var A=new f.a("losMatSW",e);A.alpha=.25,A.Fragment_Custom_Diffuse(T);var z=new f.a("losMatMW",e);z.alpha=.25,z.Fragment_Custom_Diffuse(T);var W=new f.a("losMatLW",e);W.alpha=.25,W.Fragment_Custom_Diffuse(T);var L=new f.a("losMatXLW",e);L.alpha=.25,L.Fragment_Custom_Diffuse(T);var _=new f.a("losMatSB",e);_.alpha=.25,_.Fragment_Custom_Diffuse(T);var P=new f.a("losMatMB",e);P.alpha=.25,P.Fragment_Custom_Diffuse(T);var R=new f.a("losMatLB",e);R.alpha=.25,R.Fragment_Custom_Diffuse(T);var j=new f.a("losMatXLB",e);j.alpha=.25,j.Fragment_Custom_Diffuse(T);var F,D,I,G,Y,X,q,U={teamWhite:{player:"@jrej",army:"rebels",get armyStats(){return M[this.army]},units:["OTTMK","OTTMK","OTTMK"],minis:[],startActions:6,turnActions:6,get armyValue(){var e=this;return this.units.reduce((function(t,n){return t+e.armyStats.units[n].cost}),0)}},teamBlack:{player:"@inkito",army:"tabForces",get armyStats(){return M[this.army]},units:["STLRW","STLRW","STLRW"],minis:[],startActions:6,turnActions:6,get armyValue(){var e=this;return this.units.reduce((function(t,n){return t+e.armyStats.units[n].cost}),0)}}},Z={team:"teamWhite",get player(){return U[this.team].player},get army(){return U[this.team].armyStats},get startActions(){return U[this.team].startActions},get turnActions(){return U[this.team].turnActions}},H={get team(){return"teamWhite"===Z.team?"teamBlack":"teamWhite"},get player(){return U["teamWhite"===Z.team?"teamBlack":"teamWhite"].player},get army(){return U["teamWhite"===Z.team?"teamBlack":"teamWhite"].armyStats}},K=new d.a(e),J=new d.a(e),V=new d.a(e),$=new d.a(e),Q=function(){d.q.ImportMesh("",".".concat("","/Models/"),"token.babylon",e,(function(e){(F=d.l.MergeMeshes(e)).position=new d.v(150,-18,440),F.scaling=new d.v(800,900,800),F.name="token",F.id="token1",F.material="teamWhite"===Z.team?S:B;for(var t,n=F.position.x,i=Z.startActions-1,o=0;o<i;o++){(t=F.clone("token".concat(o+2))).name="token";var a=Math.floor(40*Math.random())+50;t.position.x=n-a,t.position.z=F.position.z+Math.floor(30*Math.random())-15,n-=a}U[Z.team].turnActions=U[Z.team].startActions}))};Q();var ee=[];d.q.ImportMesh("",".".concat("","/Models/"),"dice.babylon",e,(function(t){(D=d.l.MergeMeshes(t)).scaling=new d.v(20,20,20),D.translate(d.d.Y,30,e),D.translate(d.d.X,175,e),D.translate(d.d.Z,50,e),a.getShadowMap().renderList.push(D),D.id="dice1",D.name="dice",D.checkCollisions=!0,D.collisionGroup=1,D.collisionMask=1,D.setEnabled(!1),ee.push(D)})),d.q.ImportMesh("",".".concat("","/Models/"),"dice2.babylon",e,(function(t){(I=d.l.MergeMeshes(t)).scaling=new d.v(20,20,20),I.translate(d.d.Y,33,e),I.translate(d.d.X,175,e),I.translate(d.d.Z,50,e),a.getShadowMap().renderList.push(I),I.id="dice2",I.name="dice",I.checkCollisions=!0,I.collisionGroup=1,I.collisionMask=1,I.setEnabled(!1),ee.push(I)})),d.q.ImportMesh("",".".concat("","/Models/"),"dice3.babylon",e,(function(t){(G=d.l.MergeMeshes(t)).scaling=new d.v(20,20,20),G.translate(d.d.Y,33,e),G.translate(d.d.X,175,e),G.translate(d.d.Z,50,e),a.getShadowMap().renderList.push(G),G.id="dice3",G.name="dice",G.checkCollisions=!0,G.collisionGroup=1,G.collisionMask=1,G.setEnabled(!1),ee.push(G)})),d.q.ImportMesh("",".".concat("","/Models/"),"dice4.babylon",e,(function(t){(Y=d.l.MergeMeshes(t)).scaling=new d.v(20,20,20),Y.translate(d.d.Y,33,e),Y.translate(d.d.X,175,e),Y.translate(d.d.Z,50,e),a.getShadowMap().renderList.push(Y),Y.id="dice4",Y.name="dice",Y.checkCollisions=!0,Y.collisionGroup=1,Y.collisionMask=1,Y.setEnabled(!1),ee.push(Y)})),d.q.ImportMesh("",".".concat("","/Models/"),"dice5.babylon",e,(function(t){(X=d.l.MergeMeshes(t)).scaling=new d.v(20,20,20),X.translate(d.d.Y,33,e),X.translate(d.d.X,175,e),X.translate(d.d.Z,50,e),a.getShadowMap().renderList.push(X),X.id="dice5",X.name="dice",X.checkCollisions=!0,X.collisionGroup=1,X.collisionMask=1,X.setEnabled(!1),ee.push(X)})),d.q.ImportMesh("",".".concat("","/Models/"),"dice6.babylon",e,(function(t){(q=d.l.MergeMeshes(t)).scaling=new d.v(20,20,20),q.translate(d.d.Y,33,e),q.translate(d.d.X,175,e),q.translate(d.d.Z,50,e),q.rotate(d.d.Y,d.u.ToRadians(90),e),a.getShadowMap().renderList.push(q),q.id="dice6",q.name="dice",q.checkCollisions=!0,q.collisionGroup=1,q.collisionMask=1,q.setEnabled(!1),ee.push(q)}));var te=d.m.CreateCylinder("lineOfSights",{height:.1,diameter:429.25,tessellation:256},e);te.position=new d.v(0,-100,0);var ne=d.m.CreateCylinder("lineOfSightm",{height:.1,diameter:833.25,tessellation:256},e),ie=d.m.CreateCylinder("lineOfSightl",{height:.1,diameter:1641.25,tessellation:256},e);ie.parent=ne.parent=te;var oe=d.e.FromMesh(te),ae=d.e.FromMesh(ne),se=d.e.FromMesh(ie),re=d.m.CreateBox("LOSTemplate",{width:2*U[Z.team].armyStats.units.soldier.maxRange,height:2500,depth:1},e);re.rotate(d.d.X,d.u.ToRadians(90),e),re.position=new d.v(U[Z.team].armyStats.units.soldier.maxRange,-100,0),re.visibility=0;var ce=d.e.FromMesh(re);se=se.subtract(ce).subtract(ae).subtract(oe),ae=ae.subtract(ce).subtract(oe);var le=(oe=oe.subtract(ce)).toMesh("lineOfSightS"),ue=ae.toMesh("lineOfSightM"),de=se.toMesh("lineOfSightL");de.parent=ue.parent=le,de.isPickable=ue.isPickable=le.isPickable=!1,le.setEnabled(!1),re.dispose(),te.dispose(),ne.dispose(),ie.dispose();var me,he=function(e,t,n){var i=new d.f(164/255,27/255,7/255),o=new d.f(215/255,195/255,58/255),a=new d.f(7/255,66/255,164/255),s=new d.f(7/255,164/255,27/255);return U[t].armyStats.units[e].range.mods[n]>0?s:0===U[t].armyStats.units[e].range.mods[n]?a:-1===U[t].armyStats.units[e].range.mods[n]?o:U[t].armyStats.units[e].range.mods[n]<=-2?i:void 0},fe=function(e){return 2*e.getBoundingInfo().boundingBox.extendSize.y*e.scaling.y},ge=function(e){return 2*e.getBoundingInfo().boundingBox.extendSize.x*e.scaling.x},pe=function(e){return 2*e.getBoundingInfo().boundingBox.extendSize.z*e.scaling.z},ve=function(e){return n._rootContainer._children.filter((function(t){return t.name===e}))[0]};function Me(e,t){return we.apply(this,arguments)}function we(){return(we=Object(u.a)(c.a.mark((function e(t,n){var i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=0;case 1:if(!(i<t.length)){e.next=7;break}return e.next=4,n(t[i],i,t);case 4:i++,e.next=1;break;case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}d.q.ImportMesh("",".".concat("","/Models/"),"shield.babylon",e,(function(t){(me=d.l.MergeMeshes(t)).scaling=new d.v(6,5,10),me.translate(d.d.Y,80,e),a.getShadowMap().renderList.push(me),me.id="shield",me.name="shield",me.setEnabled(!1)}));var ye,be=function(t,n,o){d.q.ImportMesh("",".".concat("","/Models/"),"".concat(t,".babylon"),e,(function(t){var s=d.l.MergeMeshes(t);s.translate(d.d.Y,25,e),s.translate(d.d.X,"Black"===n?-300:300,e),s.translate(d.d.Z,200*o-200,e),s.name="".concat(n.toLowerCase(),"Mini"),s.id="".concat(n.toLowerCase(),"Mini").concat(o+1),s.unit="soldier",s.team="team".concat(n),s.rotation.y="Black"===n?d.u.ToRadians(-90):d.u.ToRadians(90),s.material=k,s.actionManager="Black"===n?V:$,s.enablePointerMoveEvents=!0,s.width=ge(s),s.height=fe(s),function(t,n){var i=d.m.CreateCylinder("".concat(t.id,"Base"),{height:2.5,diameter:27,tessellation:128},e);i.material=new d.s("baseMaterial".concat(t.id),e),i.material.diffuseColor="Black"===n?new d.f.Black:new d.f.White,i.position=new d.v(0,1.5,0),i.parent=t}(s,n),function(e,t){var n=le.clone();n.id="".concat(e.id,"lineOfSight"),n.name="".concat(e.id,"lineOfSight"),n.parent=e,n.position=new d.v(0,1,0),n.rotation.y=d.u.ToRadians(-90),n.setEnabled(!1),n.material="Black"===t?_:A,n._children[0].material="Black"===t?P:z,n._children[1].material="Black"===t?R:W,"Black"===t?(e.losMat=[_.name,P.name,R.name,j.name],_.diffuseColor=he(e.unit,"team".concat(t),"s"),P.diffuseColor=he(e.unit,"team".concat(t),"m"),R.diffuseColor=he(e.unit,"team".concat(t),"l")):(e.losMat=[A.name,z.name,W.name,L.name],A.diffuseColor=he(e.unit,"team".concat(t),"s"),z.diffuseColor=he(e.unit,"team".concat(t),"m"),W.diffuseColor=he(e.unit,"team".concat(t),"l"))}(s,n),function(t,n){var i=me.clone("".concat(t.id,"shield"));i.material=new d.s("shieldMaterial".concat(t.id),e),i.material.diffuseColor="Black"===n?new d.f.Black:new d.f.White,i.parent=t,i.position=new d.v(0,55,0),i.setEnabled(!1)}(s,n),a.getShadowMap().renderList.push(s),U["team".concat(n)].minis.push(s),U.teamWhite.minis&&U.teamWhite.minis.length>1&&i.setTarget(U.teamWhite.minis[1])}))};U.teamBlack.units.forEach((function(e,t){return be(e,"Black",t)})),U.teamWhite.units.forEach((function(e,t){return be(e,"White",t)}));var xe=[];d.q.ImportMesh("",".".concat("","/Models/"),"container.babylon",e,(function(t){var n=d.l.MergeMeshes(t);n.scaling=new d.v(2,2,2),n.id="obstacle1",n.name="obstacle",n.receiveShadows=!0,n.width=ge(n),n.length=pe(n),n.height=fe(n);var i=new d.s(e);i.diffuseColor=new d.f(.518,.271,.267);var o=new d.s(e);o.diffuseColor=new d.f(.671,.663,.733);var s=new d.s(e);s.diffuseColor=new d.f(.318,.502,.43);var r=n.clone("obstacle");r.position=new d.v(22,0,2.5);var c=n.clone("obstacle");c.position=new d.v(-22,0,2.5);var l=d.l.MergeMeshes([r,c]);l.material=i,l.name=l.id="obstacle",l.position=new d.v(180,50,125),r.dispose(),c.dispose();var u=n.clone("obstacle");u.position=new d.v(100,50,-125),u.material=i;var m=n.clone("obstacle");m.position=new d.v(150,50,-125);var h=n.clone("obstacle");h.position=new d.v(-100,50,125);var f=n.clone("obstacle");f.position=new d.v(-150,50,125),f.material=i;var g=n.clone("obstacle");g.position=new d.v(22,0,2.5);var p=n.clone("obstacle");p.position=new d.v(-22,0,2.5);var v=d.l.MergeMeshes([g,p]);v.material=s,v.name=v.id="obstacle",v.position=new d.v(-180,50,-125),g.dispose(),p.dispose();var M=n.clone("obstacle");M.position=new d.v(-180,100,-150),M.scaling.z=1;var w=n.clone("obstacle");w.position=new d.v(180,100,100),w.scaling.z=1,w.material=o;var y=n.clone("obstacle");y.position=new d.v(250,38,150),y.scaling.z=1,y.scaling.y=1,y.material=s;var b=n.clone("obstacle");b.position=new d.v(-250,38,-100),b.scaling.z=1,b.scaling.y=1,b.material=i,a.getShadowMap().renderList.push(l,u,m,h,f,v,M,w,y,b),xe.push(l,u,m,h,f,v,M,w,y,b),n.setEnabled(!1)}));var ke=d.m.CreateCylinder("moveArea",{height:.25,diameter:202,tessellation:256},e);ke.material=r,ke.actionManager=J,ke.setEnabled(!1),ke.position=new d.v(0,26,0);var Be,Se,Oe=d.m.CreateCylinder("moveArea",{height:.25,diameter:227.25,tessellation:256},e);Oe.material=N,Oe.parent=ke,d.q.ImportMesh("","",".".concat("","/Models/setting.babylon"),e,(function(t){(Be=t[0]).scaling=new d.v(1150,1200,1e3),Be.material=b,a.getShadowMap().renderList.push(Be),(Se=d.m.CreateBox("map",{width:808,height:606,depth:1},e)).rotate(d.d.X,d.u.ToRadians(90),e),Se.material=x,Se.receiveShadows=!0,Se.translate(d.d.Y,25,e),Se.actionManager=K}));var Ce=function(){"teamWhite"===Z.team?(Z.team="teamBlack",i.position=new d.v(-700,300,0),Ge()):"teamBlack"===Z.team&&(Z.team="teamWhite",i.position=new d.v(700,300,0),Ge()),Q()},Ee="",Te=[],Ne=!1,Ae=!1,ze={position:null,rotation:null},We=function(){Te.forEach((function(t){s.removeMesh(t),e.getMeshByName("".concat(Ee.id,"To").concat(t.id))&&e.removeMesh(e.getMeshByName("".concat(Ee.id,"To").concat(t.id)))})),Te=[],e.getMeshByName("directLOS")&&e.getMeshByName("directLOS").dispose(),U[H.team].minis.forEach((function(t){e.getMeshByName("".concat(t.id,"To").concat(Ee.id))&&e.removeMesh(e.getMeshByName("".concat(t.id,"To").concat(Ee.id))),ct(t),t.diceAssigned=0})),n.removeControl(Ve)},Le=function(t){if(1===t.sourceEvent.which){var n=t.meshUnderPointer;e.hoverCursor="pointer",Ee===n?0===Te.length&&$e({skip:!0}):n.name.includes("Mini")&&(Ee&&s.removeMesh(Ee),Z.turnActions>0&&(We(),s.addMesh(n,d.f.White()),s.addMesh(ke,d.f.White()),Ee=n,ze.position=Ee.position,ke.position=new d.v(n.position.x,26,n.position.z),ke.setEnabled(!0)))}},_e=function(){Ee&&Ae&&!Ne?(ze.position&&(Ee.position=ze.position,Ee.rotation=ze.rotation,ke.setEnabled(!0),ke.position=new d.v(ze.position.x,26,ze.position.z),e.getMeshByName("".concat(Ee.id,"lineOfSight")).setEnabled(!1),e.getMeshByName("groundLOS".concat(Ee.id))&&e.getMeshByName("groundLOS".concat(Ee.id)).setEnabled(!1)),t.removeEventListener("mousemove",et),Ae=!1):Ee&&!Ae&&(ke.setEnabled(!1),s.removeMesh(Ee),s.removeMesh(ke),We(),e.removeMesh(ye),e.getMeshByName("".concat(Ee.id,"lineOfSight")).setEnabled(!1),e.getMeshByName("groundLOS".concat(Ee.id))&&e.getMeshByName("groundLOS".concat(Ee.id)).setEnabled(!1),Ge(),Ee="",e.hoverCursor="pointer",ye&&ye.dispose())},Pe=function(t,n){var i=new d.v(t.position.x,t.position.y+5,t.position.z-t.width/2),o=new d.v(t.position.x,t.position.y+5,t.position.z+t.width/2),a=new d.v(n.position.x,n.position.y+5,n.position.z),s=a.subtract(i);s=d.v.Normalize(s);var r=a.subtract(o);r=d.v.Normalize(r);var c=ge(t)/2+ge(t),l=new d.o(i,s,c),u=new d.o(o,r,c),m=e.multiPickWithRay(l),h=e.multiPickWithRay(u);return!!m.some((function(e){return e.pickedMesh.name.includes("obstacle")}))||!!h.some((function(e){return e.pickedMesh.name.includes("obstacle")}))},Re=function(e,t){var n=Qe(e),i=new d.v(e.position.x,55,e.position.z),o=new d.v(t.position.x,55,t.position.z).subtract(i);return o=d.v.Normalize(o),!(180*Math.acos(d.v.Dot(n,o))/Math.PI>90)},je=function(t){var n=new d.v(t.position.x,t.position.y,t.position.z+ge(t)/2),i=new d.v(t.position.x,t.position.y,t.position.z-ge(t)/2),o=new d.v(t.position.x+ge(t)/2,t.position.y,t.position.z),a=new d.v(t.position.x-ge(t)/2,t.position.y,t.position.z),s=new d.v(0,-1,0),r=fe(t)/2,c=new d.o(n,s,r),l=new d.o(i,s,r),u=new d.o(o,s,r),m=new d.o(a,s,r),h=e.multiPickWithRay(c),f=e.multiPickWithRay(l),g=e.multiPickWithRay(u),p=e.multiPickWithRay(m);return h.some((function(e){return e.pickedMesh.name.includes("obstacle")}))?h.filter((function(e){return e.pickedMesh.name.includes("obstacle")})).map((function(e){return e.pickedMesh}))[0]:f.some((function(e){return e.pickedMesh.name.includes("obstacle")}))?f.filter((function(e){return e.pickedMesh.name.includes("obstacle")})).map((function(e){return e.pickedMesh}))[0]:g.some((function(e){return e.pickedMesh.name.includes("obstacle")}))?g.filter((function(e){return e.pickedMesh.name.includes("obstacle")})).map((function(e){return e.pickedMesh}))[0]:p.some((function(e){return e.pickedMesh.name.includes("obstacle")}))?p.filter((function(e){return e.pickedMesh.name.includes("obstacle")})).map((function(e){return e.pickedMesh}))[0]:h.some((function(e){return e.pickedMesh.name.includes("map")}))?h.filter((function(e){return e.pickedMesh.name.includes("map")})).map((function(e){return e.pickedMesh}))[0]:void 0},Fe=function(t){e.getMeshByName("".concat(t.id,"shield"))&&e.getMeshByName("".concat(t.id,"shield")).setEnabled(!1)},De=function(t){var n,i,o=t.meshUnderPointer;Ee&&Ue(Ee,o)&&st(Ee,o)<=6&&(Pe(n=Ee,i=o)?e.getMeshByName("".concat(n.id,"shield")).setEnabled(!0):e.getMeshByName("".concat(n.id,"shield"))&&e.getMeshByName("".concat(n.id,"shield")).setEnabled(!1),Pe(i,n)?e.getMeshByName("".concat(i.id,"shield")).setEnabled(!0):e.getMeshByName("".concat(i.id,"shield"))&&e.getMeshByName("".concat(i.id,"shield")).setEnabled(!1),o.intersectsMesh(Ee,!1)||(Ue(Ee,o)?(e.getMeshByName("".concat(Ee.id,"lineOfSight")).setEnabled(!0),e.getMeshByName("groundLOS".concat(Ee.id))&&e.getMeshByName("groundLOS".concat(Ee.id)).setEnabled(!0),ke.setEnabled(!1)):o.intersectsMesh(Ee,!1)||Ue(Ee,o)||(ke.setEnabled(!1),e.getMeshByName("".concat(Ee.id,"lineOfSight")).setEnabled(!0),e.getMeshByName("groundLOS".concat(Ee.id))&&e.getMeshByName("groundLOS".concat(Ee.id)).setEnabled(!0))))},Ie=function(){Ee&&(e.getMeshByName("".concat(Ee.id,"lineOfSight")).setEnabled(!1),e.getMeshByName("".concat(Ee.id,"shield")).setEnabled(!1),U[H.team].minis.forEach((function(t){return e.getMeshByName("".concat(t.id,"lineOfSight")).setEnabled(!1)})),e.getMeshByName("groundLOS".concat(Ee.id))&&e.getMeshByName("groundLOS".concat(Ee.id)).setEnabled(!1),Ae||0!==Te.length||ke.setEnabled(!0),Fe(Ee),U[H.team].minis.forEach((function(e){Fe(e)}))),e.hoverCursor="pointer"},Ge=function(){if(U[Z.team].minis&&U[Z.team].minis.length>0){var t=U[Z.team].minis.map((function(e){return e.position.x})),n="teamWhite"===Z.team?t.indexOf(Math.min.apply(Math,Object(l.a)(t))):t.indexOf(Math.max.apply(Math,Object(l.a)(t))),o=U[Z.team].minis[n],a=d.l.CreateSphere("targetSphere",{size:10},e);a.setEnabled(!1),a.position=new d.v(o.position.x,o.position.y+30,0),i.setTarget(a),setTimeout((function(){a.dispose()}),1100)}},Ye=function(e){for(var t=[],n=0;n<e;n++)t.push(Math.floor(6*Math.random())+1);return t},Xe=function(t,n,i,o){for(var a=new d.v(n.position.x+10,n.position.y+7,n.position.z+30),s=new d.v(n.position.x+10,n.position.y+7,n.position.z+45),r=new d.v(n.position.x+-5,n.position.y+7,n.position.z+30),c=new d.v(n.position.x+-5,n.position.y+7,n.position.z+37.5),l=new d.v(n.position.x+-5,n.position.y+7,n.position.z+45),u=new d.v(n.position.x+-20,n.position.y+7,n.position.z+30),m=new d.v(n.position.x+-20,n.position.y+7,n.position.z+37.5),h=[a,s,r,l,u,new d.v(n.position.x+-20,n.position.y+7,n.position.z+45)],f=function(a){p=a+1,o?ee[t[a]-1].material=E:n.name.includes("white")?ee[t[a]-1].material=O:n.name.includes("black")&&(ee[t[a]-1].material=C),3===t.length&&3===p?ee[t[a]-1].clone("diceClone".concat(a)).position=c:5===t.length&&5===p?ee[t[a]-1].clone("diceClone".concat(a)).position=m:ee[t[a]-1].clone("diceClone".concat(a)).position=h[a],setTimeout((function(){e.removeMesh(e.getMeshByName("diceClone".concat(a)))}),i)},g=0;g<t.length;g++){var p;f(g)}},qe=function(e,t,n,i,o,a){var s=t.filter((function(t){return t+n>=U[e.team].armyStats.units.soldier.range.success})),r=o.filter((function(e){return e+a>=U[i.team].armyStats.units.soldier.defense.success}));console.log("Player rolls:"),console.log(t),console.log("He has a "+n+" modifier to dice roll"),console.log("Enemy rolls:"),console.log(o),console.log("He has a "+a+" modifier to dice roll"),console.log("Player success rolls:"),console.log(s),console.log("Enemy Success rolls:"),console.log(r);for(var c=0;c<s.length;c++)for(var u=0;u<r.length;u++)s[c]===r[u]&&(s.splice(c,1),r.splice(u,1));return Math.max.apply(Math,Object(l.a)(s))>Math.max.apply(Math,Object(l.a)(r))?(console.log("".concat(e.id," wins with a higher roll!")),e.name):Math.max.apply(Math,Object(l.a)(r))>Math.max.apply(Math,Object(l.a)(s))?(console.log("".concat(i.id," wins with a higher roll!")),i.name):null},Ue=function(t,n){var i,o=d.v.Distance(t.position,n.position)-n.width/2,a="whiteMini"===t.name?"teamWhite":"teamBlack",s=U[a].armyStats.units[t.unit].maxRange;return o<=t.width/2+n.width/2?i="c":o<=202?i="s":o>202&&o<=404?i="m":o>404&&o<=808?i="l":o>808&&o<=s?i="xl":o>s&&(i=null),function(t,n){var i=new d.v(t.position.x,t.position.y+.75*fe(t),t.position.z),o=new d.v(n.position.x,n.position.y+.75*fe(n),n.position.z-n.width/2+.25*n.width),a=new d.v(n.position.x,n.position.y+.75*fe(n),n.position.z+n.width/2-.25*n.width),s=o.subtract(i);s=d.v.Normalize(s);var r=a.subtract(i);r=d.v.Normalize(r);var c=d.v.Distance(t.position,n.position)-ge(n)/2,l=new d.o(i,s,c),u=new d.o(i,r,c),m=e.multiPickWithRay(l),h=e.multiPickWithRay(u);return!m.some((function(e){return e.pickedMesh.name.includes("obstacle")}))||!h.some((function(e){return e.pickedMesh.name.includes("obstacle")}))}(t,n)&&Re(t,n)?i:null},Ze=function(){var e="";return 0===U.teamBlack.startActions&&0===U.teamWhite.startActions?(console.log("tie"),e=null,console.log("Game Over. No Winners this time.")):0===U.teamBlack.startActions?(e="Team White",console.log("Game Over. ".concat(e," wins!"))):0===U.teamWhite.startActions?(e="Team Black",console.log("Game Over. ".concat(e," wins!"))):e=void 0,e},He=function(e,t){var n=e.name.includes("white")?"teamWhite":"teamBlack",i=Ue(e,t),o=function(e,t){return e.position.y>t.position.y+fe(t)}(e,t)?1:0;return(Pe(t,e)?-1:0)+o+U[n].armyStats.units[e.unit].range.mods[i]},Ke=function(t,n,o){var a="";if(t){var s=Ue(t,n),r=Pe(t,n)?1:0,c=He(t,n),l=Pe(n,t)?1:0,u=He(n,t);if(s&&Re(t,n)){if(n.intersectsMesh(t,!1)||"c"===s){console.log("Stabbing "+n.id+" with "+t.id),console.log("Player target roll: "+Z.army.units[t.unit].melee.success+"+");var m=Ye(Z.army.units[t.unit].melee.roll);Xe(m,t,1e3),console.log("Enemy target roll: "+H.army.units[t.unit].melee.success+"+");var h=Ye(1);Xe(h,n,1e3),a=qe(t,m,0,n,h,0)}else{var f=[],g=[],p=[];console.log("Shooting ".concat(n.id," with ").concat(t.id," at range ").concat(s,".")),console.log(t.id+" target roll: "+Z.army.units[t.unit].range.success+"+"),f=Ye(o?1:n.diceAssigned),Xe(f,t,1e3),g=f.map((function(e){return e+c})),Ue(n,t)&&!o&&(console.log(n.id+" target roll: "+H.army.units[n.unit].range.success+"+"),p=Ye(1),Xe(p,n,1e3),a=qe(t,f,c,n,p,u)),a||g.some((function(e){return e>=Z.army.units[t.unit].range.success}))&&(o?(console.log("Enemy rolled:"),console.log(f),console.log("Hot damn! You got shot!")):(console.log("Player rolled:"),console.log(f),console.log("Success! You shot him!")),a=t.name)}if(a===t.name){console.log(n.id+" is hit. Defense roll target: "+U[n.team].armyStats.units[n.unit].defense.success+"+"),l>0&&console.log(n.id+" has +1 to dice roll as he is in cover.");var v=Ye(U[n.team].armyStats.units[n.unit].defense.roll);console.log(n.team+" player rolls : "),console.log(v),setTimeout((function(){Xe(v,n,1250,!0)}),1250),v.some((function(e){return e+l>=U[n.team].armyStats.units[n.unit].defense.success}))?console.log("Defense roll successful. "+n.id+" saved!"):(console.log(n.id+" killed!"),setTimeout((function(){n.position=new d.v(Math.floor(190*Math.random())-200,0,-440+Math.floor(30*Math.random())-15),n.name="decor",n.isPickable=!1,e.getMeshByName("".concat(n.id,"To").concat(t.id))&&e.removeMesh(e.getMeshByName("".concat(n.id,"To").concat(t.id))),U[n.team].minis=U[n.team].minis.filter((function(e){return e.id!==n.id})),U[n.team].startActions-=2,Fe(n),at(n),o&&_e()}),2500))}else if(a===n.name){console.log(t.id+" is hit. Defense roll target: "+U[t.team].armyStats.units[t.unit].defense.success+"+"),r>0&&console.log(t.id+" has +1 to dice roll as he is in cover.");var M=Ye(U[t.team].armyStats.units[t.unit].defense.roll);console.log(t.team+" player rolls : "),console.log(M),setTimeout((function(){Xe(M,t,1250,!0)}),1250),M.some((function(e){return e+r>=U[t.team].armyStats.units[t.unit].defense.success}))?console.log("Defense roll successful. "+t.id+" saved!"):(console.log(t.id+" killed!"),setTimeout((function(){i.target=Se,t.position=new d.v(200-Math.floor(190*Math.random()),0,-440+Math.floor(30*Math.random())-15),t.name="decor",t.isPickable=!1,U[t.team].minis=U[t.team].minis.filter((function(e){return e.id!==t.id})),U[t.team].startActions-=2,Fe(t),_e()}),2500))}else console.log("No winners! Try again.")}}},Je=function(){var t=Object(u.a)(c.a.mark((function t(){var n,i,o;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Ne=!0,n=function(e){return new Promise((function(t){return setTimeout(t,e)}))},!(Ee&&Te&&Te.length>0)){t.next=18;break}return i=U[H.team].minis.filter((function(e){return H.army.units[e.unit].range.mods[Ue(e,Ee)]>=0})),o=i.filter((function(e){return!Te.some((function(t){return t===e}))})),t.next=7,Me(Te,function(){var e=Object(u.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Init attack on ".concat(t.id,"!")),Ee&&Ke(Ee,t),e.next=4,n(3e3);case 4:console.log("Attack on ".concat(t.id," completed!"));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 7:if(!o){t.next=10;break}return t.next=10,Me(o,function(){var e=Object(u.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Init one way attack from ".concat(t.id,"!")),Ee&&Ke(t,Ee,!0),e.next=4,n(3e3);case 4:console.log("One way attack from ".concat(t.id," completed!"));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:console.log("Done with attacks."),U[Z.team].turnActions-=1,e.removeMesh(e.getMeshByName("token")),Ie(),_e(),Ze(),Ne=!1,0===U[Z.team].turnActions&&setTimeout((function(){Ce()}),3500);case 18:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Ve=m.a.CreateSimpleButton("rollButton","Roll Dice");Ve.width="120px",Ve.height="60px",Ve.color="white",Ve.left="40%",Ve.top="30%",Ve.cornerRadius=20,Ve.background="black",Ve.zIndex=2e3,Ve.onPointerClickObservable.add((function(){Ne||Je()}));var $e=function(t){var n=t.skip;if(Ee){if(n||(ze.position=Ee.position,Ee.position=ye.position),ke.position=new d.v(Ee.position.x,26,Ee.position.z),ke.setEnabled(!1),e.getMeshByName("".concat(Ee.id,"lineOfSight")).setEnabled(!0),je(Ee)&&je(Ee).name.includes("obstacle")){e.getMeshByName("groundLOS".concat(Ee.id))?(e.getMeshByName("groundLOS".concat(Ee.id)).position.y=26-Ee.position.y,e.getMeshByName("groundLOS".concat(Ee.id)).setEnabled(!0)):e.getMeshByName("".concat(Ee.id,"lineOfSight")).clone("groundLOS".concat(Ee.id)).position.y=26-Ee.position.y,e.getMeshByName("groundMoveArea")?e.getMeshByName("groundMoveArea").position.y=Ee.position.y-fe(Ee)/2-5:(ke.clone("groundMoveArea"),e.getMeshByName("groundMoveArea").parent=ke,e.getMeshByName("groundMoveArea").position=new d.v(0,Ee.position.y-fe(Ee)/2-5,0));var i="if( vPositionW.z  < ".concat(Math.round(je(Ee).position.z-pe(je(Ee))/2),".){ discard; } if( vPositionW.z  > ").concat(Math.round(je(Ee).position.z+pe(je(Ee))/2),".){ discard; } if( vPositionW.x  > ").concat(Math.round(je(Ee).position.x+ge(je(Ee))/2),".){ discard; } if( vPositionW.x  < ").concat(Math.round(je(Ee).position.x-ge(je(Ee))/2),".){ discard; }"),o=new f.a("highMat",e);o.alpha=.25,o.Fragment_Custom_Diffuse(i),o.diffuseColor=e.getMaterialByName(Ee.losMat[0]).diffuseColor,e.getMeshByName("".concat(Ee.id,"lineOfSight")).material=o,e.getMeshByName("".concat(Ee.id,"lineOfSight"))._children.forEach((function(t,n){t.material=new f.a("highMat".concat(n),e),t.material.alpha=.25,t.material.Fragment_Custom_Diffuse(i),t.material.diffuseColor=e.getMaterialByName(Ee.losMat[n+1]).diffuseColor})),e.getMeshByName("groundMoveArea").material=new f.a("highMoveMat",e),e.getMeshByName("groundMoveArea").material.alpha=.25,e.getMeshByName("groundMoveArea").material.Fragment_Custom_Diffuse(i),e.getMeshByName("groundMoveArea")._children.forEach((function(e){return e.setEnabled(!1)}))}else e.getMeshByName("".concat(Ee.id,"lineOfSight")).material=e.getMaterialByName(Ee.losMat[0]),e.getMeshByName("".concat(Ee.id,"lineOfSight"))._children.forEach((function(t,n){return t.material=e.getMaterialByName(Ee.losMat[n+1])})),Oe.material=N,e.getMeshByName("groundLOS".concat(Ee.id))&&e.getMeshByName("groundLOS".concat(Ee.id)).dispose(),e.getMeshByName("groundMoveArea")&&e.getMeshByName("groundMoveArea").dispose();ze.rotation=Ee.rotation.clone(),Ae=!0}},Qe=function(e){var t=new d.v(0,0,-1),n=e.getDirection(t);return n.normalize(),n},et=function(e){if(e.preventDefault(),Ee&&it(e)){var t=Ee.position.x-it(e).x,n=Ee.position.z-it(e).z;Ee.rotation.y=Math.atan2(t,n)}},tt=function(t){1!==t.which&&1!==t.sourceEvent.which||Ee&&Ae&&(U[Z.team].turnActions-=1,e.removeMesh(e.getMeshByName("token")),Ae=!1,ze.position=null,ze.rotation=null,_e(),0===U[Z.team].turnActions&&setTimeout((function(){Ce()}),1e3))},nt=function(e){if((e.preventDefault(),Ee&&it(e))&&(![].concat(Object(l.a)(U[H.team].minis),Object(l.a)(U[Z.team].minis.filter((function(e){return e.id!==Ee.id})))).some((function(t){return it(e).x<t.position.x+ge(t)-2&&it(e).x>t.position.x-ge(t)+2&&it(e).z<t.position.z+ge(t)-2&&it(e).z>t.position.z-ge(t)+2}))&&!xe.filter((function(e){return fe(e)+e.position.y-fe(e)/2>fe(Ee)+Ee.position.y})).some((function(t){return it(e).x<t.position.x+ge(t)/2+ge(Ee)/2&&it(e).x>t.position.x-ge(t)/2-ge(Ee)/2&&it(e).z<t.position.z+pe(t)/2+ge(Ee)/2&&it(e).z>t.position.z-pe(t)/2-ge(Ee)/2}))&&it(e).x>-388&&it(e).x<388&&it(e).z>-285&&it(e).z<285)){var t=xe.filter((function(e){return fe(e)<fe(Ee)+Ee.position.y-25})).filter((function(t){return it(e).x<t.position.x+ge(t)/2+ge(Ee)/2&&it(e).x>t.position.x-ge(t)/2-ge(Ee)/2&&it(e).z<t.position.z+pe(t)/2+ge(Ee)/2&&it(e).z>t.position.z-pe(t)/2-ge(Ee)/2}));t&&t.length>0?ye.position=new d.v(it(e).x,fe(t[0])+26,it(e).z):ye.position=new d.v(it(e).x,25,it(e).z)}},it=function(){var t=e.pick(e.pointerX,e.pointerY,(function(e){return e===Se}));return t.hit?t.pickedPoint:null},ot=function(e){n.addControl(Ve),lt();var t=new d.f.Black;Ee&&!Te.some((function(t){return t.id===e.id}))&&(he(Ee.unit,Z.team,Ue(Ee,e))&&(t=he(Ee.unit,Z.team,Ue(Ee,e))),s.addMesh(e,t),Te.push(e),"c"!==Ue(Ee,e)&&dt(Ee,e,!1),rt(e),mt())},at=function(t){t&&(t.diceAssigned=0),Te.forEach((function(t,n){0===t.diceAssigned&&(Te.splice(n,1),s.removeMesh(t),ct(t),e.removeMesh(e.getMeshByName("".concat(Ee.id,"To").concat(t.id))))}))},st=function(e,t){var n,i;return"c"===Ue(e,t)?i=Z.army.units.soldier.melee.success:(n=He(e,t),i=Z.army.units.soldier.range.success-n),i},rt=function(e){if(Ee){var t=e.diceAssigned,i=st(Ee,e),o=new m.b("".concat(e.id,"diceStat"));o.text="".concat(t,"d").concat(i,"+"),o.color="white",o.fontFamily="Arial",o.fontSize="15px",n.addControl(o),o.linkWithMesh(e),o.linkOffsetY=-40}},ct=function(e){ve("".concat(e.id,"diceStat"))&&ve("".concat(e.id,"diceStat")).dispose()},lt=function(){Te&&Te.length>0&&Te.forEach((function(e){ct(e),rt(e)}))},ut=function(e){var t=e.meshUnderPointer,n=Te.map((function(e){return e.diceAssigned})).indexOf(Math.max.apply(Math,Object(l.a)(Te.filter((function(e){return e.id!==t.id})).map((function(e){return e.diceAssigned})))));if(Ee&&t&&t.name.includes("Mini")&&Ue(Ee,t)&&st(Ee,t)<=6)if(ke.setEnabled(!1),0===Te.length)t.diceAssigned=Z.army.units[Ee.unit].range.roll,ot(t);else if(n>=0&&Te.reduce((function(e,t){return e+t.diceAssigned}),0)===Z.army.units[Ee.unit].range.roll&&Te.filter((function(e){return e.id!==t.id})).every((function(e){return e.diceAssigned>=1})))t.diceAssigned?t.diceAssigned+=1:t.diceAssigned=1,Te[n].diceAssigned-=1,ot(t),at();else{if(Te.length>1&&Te.every((function(e){return 1===e.diceAssigned}))){var i=Te.splice(Te.indexOf(Te[n]),1)[0];at(i),t.diceAssigned?t.diceAssigned+=1:t.diceAssigned=1,ot(t)}t.diceAssigned===Z.army.units[Ee.unit].range.roll&&(at(t),We())}},dt=function(t,n,i){var o,a;if(i){o=new d.v(t.position.x,t.position.y+.7*fe(t),t.position.z),a=new d.v(n.position.x,n.position.y+.7*fe(n),n.position.z);var s=[new d.g(215/255,195/255,58/255,1),new d.g(0,0,0,0)];d.m.CreateLines("".concat(t.id,"To").concat(n.id),{points:[o,a],colors:s,updatable:!0},e)}else{o=new d.v(t.position.x,t.position.y+.8*fe(t),t.position.z),a=new d.v(n.position.x,n.position.y+.8*fe(n),n.position.z);var r=[new d.g(1,1,1,1),new d.g(0,0,0,0)];d.m.CreateLines("".concat(t.id,"To").concat(n.id),{points:[o,a],colors:r,updatable:!0},e)}},mt=function(){Ee&&Te&&U[H.team].minis.forEach((function(t){e.getMeshByName("".concat(t.id,"To").concat(Ee.id))||(H.army.units[t.unit].range.mods[Ue(t,Ee)]>=0||e.getMeshByName("".concat(Ee.id,"To").concat(t.id)))&&dt(t,Ee,!0)}))};J.registerAction(new d.i(d.a.OnPointerOverTrigger,(function(e){(ye=Ee.clone()).position=Ee.position,ye.isPickable=!1,ye._children.forEach((function(e){return e.setEnabled(!1)})),ye.material=g,t.addEventListener("mousemove",nt,!1),t.addEventListener("click",$e,!1)}))),J.registerAction(new d.i(d.a.OnPointerOutTrigger,(function(e){ye.dispose(),t.removeEventListener("mousemove",nt),t.removeEventListener("click",$e)}))),K.registerAction(new d.i(d.a.OnPointerOverTrigger,(function(n){Ee&&Ae&&e.getMeshByName("".concat(Ee.id,"lineOfSight")).setEnabled(!0),Ae&&(t.addEventListener("mousemove",et,!1),t.addEventListener("click",tt,!1))}))),K.registerAction(new d.i(d.a.OnPointerOutTrigger,(function(n){Ee&&!Ae&&(e.getMeshByName("".concat(Ee.id,"lineOfSight")).setEnabled(!1),e.getMeshByName("groundLOS".concat(Ee.id))&&e.getMeshByName("groundLOS".concat(Ee.id)).setEnabled(!1)),t.removeEventListener("mousemove",et),t.removeEventListener("click",tt)}))),V.registerAction(new d.i(d.a.OnPickUpTrigger,(function(e){"teamBlack"!==Z.team||Ne||(Ae?tt(e):Le(e))}))),V.registerAction(new d.i(d.a.OnLeftPickTrigger,(function(e){"teamWhite"!==Z.team||Ae||Ne||ut(e)}))),V.registerAction(new d.i(d.a.OnPointerOverTrigger,(function(e){"teamWhite"!==Z.team||Ne||De(e)}))),V.registerAction(new d.i(d.a.OnPointerOutTrigger,(function(e){"teamWhite"===Z.team&&Ie()}))),$.registerAction(new d.i(d.a.OnPickUpTrigger,(function(e){"teamWhite"!==Z.team||Ne||(Ae?tt(e):Le(e))}))),$.registerAction(new d.i(d.a.OnLeftPickTrigger,(function(e){"teamBlack"!==Z.team||Ae||ut(e)}))),$.registerAction(new d.i(d.a.OnPointerOverTrigger,(function(e){"teamBlack"!==Z.team||Ne||De(e)}))),$.registerAction(new d.i(d.a.OnPointerOutTrigger,(function(e){"teamBlack"===Z.team&&Ie()}))),t.addEventListener("contextmenu",_e,!1),e.onDispose=function(){t.removeEventListener("mousemove",nt),t.removeEventListener("contextmenu",_e)}},y=function(){return o.a.createElement("div",null,o.a.createElement(v,{className:"w-full h-full",antialias:!0,onSceneReady:w,id:"my-canvas"}))},b=function(){return o.a.createElement("div",{className:"w-full h-full overflow-hidden"},o.a.createElement(y,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(b,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[177,1,2]]]);
//# sourceMappingURL=main.3c7a35b7.chunk.js.map